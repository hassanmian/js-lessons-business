(this["webpackJsonpjs-lessons-business"]=this["webpackJsonpjs-lessons-business"]||[]).push([[0],{21:function(e,t,n){e.exports=n(34)},26:function(e,t,n){},27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),u=n(17),l=n.n(u),o=(n(26),n(1)),i=n(2),s=(n(27),n(4)),m=n.n(s),p=n(8),h=n(18),f=n(19),v="https://frebi.willandskill.eu/",E="".concat(v,"api/v1/"),g="".concat(v,"auth/"),d="".concat(v,"api-token-auth/"),b=function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"register",value:function(){var e=Object(p.a)(m.a.mark((function e(t,n,a,r,c,u){var l,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l="".concat(g,"users/"),o={firstName:t,lastName:n,email:a,password:r,organisationName:c,organisationKind:u},e.abrupt("return",fetch(l,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(o)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r,c,u){return e.apply(this,arguments)}}()},{key:"activateUser",value:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(g,"users/activate/"),r={uid:t,token:n},e.abrupt("return",fetch(a,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(r)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(d),r={email:t,password:n},e.abrupt("return",fetch(a,{method:"POST",headers:this.getPublicHeaders(),body:JSON.stringify(r)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMe",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(E,"me"),e.abrupt("return",fetch(t,{headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerList",value:function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(E,"customers"),e.abrupt("return",fetch(t,{headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerDetail",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(E,"customers/").concat(t,"/"),e.abrupt("return",fetch(n,{headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"customerDelete",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(E,"customers/").concat(t,"/"),e.abrupt("return",fetch(n,{method:"DELETE",headers:this.getPrivateHeaders()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"customerCreate",value:function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(E,"customers"),e.abrupt("return",fetch(n,{method:"POST",headers:this.getPrivateHeaders(),body:JSON.stringify(t)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setToken",value:function(e){localStorage.setItem("BUSINESS_TOKEN",e)}},{key:"getToken",value:function(){return localStorage.getItem("BUSINESS_TOKEN")}},{key:"getPublicHeaders",value:function(){return{"Content-Type":"application/json"}}},{key:"getPrivateHeaders",value:function(){return{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.getToken())}}}]),e}();function j(e){var t=e.handleOnSuccess,n=Object(a.useState)(""),c=Object(o.a)(n,2),u=c[0],l=c[1],i=Object(a.useState)(""),s=Object(o.a)(i,2),m=s[0],p=s[1],h=Object(a.useState)(""),f=Object(o.a)(h,2),v=f[0],E=f[1],g=Object(a.useState)(""),d=Object(o.a)(g,2),j=d[0],O=d[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),y=k[0],S=k[1],C=Object(a.useState)(""),N=Object(o.a)(C,2),P=N[0],T=N[1],H=Object(a.useState)(""),L=Object(o.a)(H,2),x=L[0],F=L[1],B=Object(a.useState)(""),D=Object(o.a)(B,2),I=D[0],J=D[1],U=new b;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Create new Customer"),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"Customer Name",value:u,onChange:function(e){return l(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"organisationNr",value:m,onChange:function(e){return p(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"vatNr",value:v,onChange:function(e){return E(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"reference",value:j,onChange:function(e){return O(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"paymentTerm",value:y,onChange:function(e){return S(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"website",value:P,onChange:function(e){return T(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"email",value:x,onChange:function(e){return F(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"phoneNumber",value:I,onChange:function(e){return J(e.target.value)}})),r.a.createElement("button",{onClick:function(){var e={name:u,organisationNr:m,vatNr:v,reference:j,paymentTerm:y,website:P,email:x,phoneNumber:I};U.customerCreate(e).then((function(e){return e.json()})).then((function(e){t&&t()}))}},"Create test customer"))}function O(e){var t=e.customerList;return r.a.createElement(r.a.Fragment,null,0===t.length&&r.a.createElement("strong",null,"You don't have any customer."),t.map((function(e){return r.a.createElement("p",{key:e.id},r.a.createElement(c.b,{to:"/customer/".concat(e.id)},e.name))})))}function w(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],u=new b;function l(){u.getCustomerList().then((function(e){return e.json()})).then((function(e){c(e.results)}))}return Object(a.useEffect)((function(){l()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Welcome to Business Application"),r.a.createElement("div",null,r.a.createElement("h2",null,"Customers"),r.a.createElement("div",null,r.a.createElement(O,{customerList:n})),r.a.createElement("hr",null),r.a.createElement("div",null,r.a.createElement(j,{handleOnSuccess:l}))))}function k(){var e=Object(a.useState)("mian+test+123@willandskill.se"),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)("js-fend-19"),l=Object(o.a)(u,2),s=l[0],m=l[1],p=new b,h=Object(i.f)(),f=new URLSearchParams(h.location.search),v=f.get("uid"),E=f.get("token");return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Activate account"),v&&E&&r.a.createElement("div",null,"Your account is being activated",void p.activateUser(v,E).then(h.push("/login"))),!v&&!E&&r.a.createElement("div",null,r.a.createElement("p",null,"Your account is now active. Please Login"),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"email",value:n,onChange:function(e){return c(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"password",value:s,onChange:function(e){return m(e.target.value)}})),r.a.createElement("button",{onClick:function(){p.login(n,s).then((function(e){return e.json()})).then((function(e){p.setToken(e.token),h.push("/home")}))}},"Login")))}function y(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)("Hassan"),l=Object(o.a)(u,2),i=l[0],s=l[1],m=Object(a.useState)("Mian"),p=Object(o.a)(m,2),h=p[0],f=p[1],v=Object(a.useState)("mian+test+123@willandskill.se"),E=Object(o.a)(v,2),g=E[0],d=E[1],j=Object(a.useState)("js-fend-19"),O=Object(o.a)(j,2),w=O[0],k=O[1],y=Object(a.useState)("Apple Inc"),S=Object(o.a)(y,2),C=S[0],N=S[1],P=new b;return r.a.createElement(r.a.Fragment,null,!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Register"),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"First Name",value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"Last Name",value:h,onChange:function(e){return f(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"Email",value:g,onChange:function(e){return d(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"Password",value:w,onChange:function(e){return k(e.target.value)}})),r.a.createElement("p",null,r.a.createElement("input",{placeholder:"Company Name",value:C,onChange:function(e){return N(e.target.value)}})),r.a.createElement("button",{onClick:function(){P.register(i,h,g,w,C,"0").then((function(e){return e.json()})).then((function(e){c(!0)}))}},"Create User")),n&&r.a.createElement("p",null,"Please check your email, ",g,", for activation link"))}function S(e){var t=e.match.params.id,n=Object(a.useState)(null),c=Object(o.a)(n,2),u=c[0],l=c[1],s=new b,m=Object(i.f)();return Object(a.useEffect)((function(){s.getCustomerDetail(t).then((function(e){return e.json()})).then((function(e){l(e)}))}),[]),r.a.createElement(r.a.Fragment,null,!u&&r.a.createElement("p",null,"Loading Customer data"),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,u.name),r.a.createElement("button",{onClick:function(){s.customerDelete(t).then((function(e){alert("Customer is deleted"),m.push("/home")}))}},"Delete Customer"),r.a.createElement("p",null,"name: ",u.name),r.a.createElement("p",null,"organisationNr: ",u.organisationNr),r.a.createElement("p",null,"vatNr: ",u.vatNr),r.a.createElement("p",null,"reference: ",u.reference),r.a.createElement("p",null,"paymentTerm: ",u.paymentTerm),r.a.createElement("p",null,"website: ",u.website),r.a.createElement("p",null,"email: ",u.email),r.a.createElement("p",null,"phoneNumbe: ",u.phoneNumber)))}var C=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1],u=new b;return Object(a.useEffect)((function(){u.getMe().then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,n&&n.firstName&&r.a.createElement("p",null,"Welcome ",n.firstName),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/customer/:id",component:S}),r.a.createElement(i.a,{path:"/home"},r.a.createElement(w,null)),r.a.createElement(i.a,{path:"/login"},r.a.createElement(k,null)),r.a.createElement(i.a,{path:"/"},r.a.createElement(y,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(C,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.18311dbd.chunk.js.map